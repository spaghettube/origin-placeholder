execute store result score @s atkspd run attribute @s minecraft:generic.attack_speed get 10
attribute @s minecraft:generic.attack_damage modifier remove 1-1-1-1-1

$execute if score @s atkspd matches ..1989 run with spd attribute @s minecraft:generic.attack_speed with dmg attribute @s minecraft:generic.attack_damage with simplespd calculate "((4-(200-0@(spd)))^2)^(1/2)" with simplebasedmg calculate "((0@(dmg))^2)^(1/2)-3*(0$(amplifier)+1)" with cleandmg calculate "(((1.8^((0-0.05)*@(simplebasedmg)-0.01*@(simplespd)))*(0.28*@(simplebasedmg)+0.24*@(simplespd)*@(simplebasedmg)+0.87*@(simplespd)^(0.5))))" with mult calculate "(0-1)+$(fake_crit)*(@(cleandmg)+3*(0$(amplifier)+1))/(@(simplebasedmg)+3*(0$(amplifier)+1))" function tiger:legacy_combatant/dmgcalc2 {simplebasedmg:@(simplebasedmg),mult:@(mult),fake_crit:$(fake_crit),amplifier:$(amplifier),cleandmg:@(cleandmg)}
$execute if score @s atkspd matches 1990.. run with dmg attribute @s minecraft:generic.attack_damage with simplebasedmg calculate "((0@(dmg))^2)^(1/2)-3*(0$(amplifier)+1)" with cleandmg calculate "(1.8^((0-0.05)*@(simplebasedmg)-0.029))*(0.976*@(simplebasedmg)+1.481)" with mult calculate "(0-1)+$(fake_crit)*(@(cleandmg)+3*(0$(amplifier)+1))/(@(simplebasedmg)+3*(0$(amplifier)+1))" function tiger:legacy_combatant/dmgcalc2 {simplebasedmg:@(simplebasedmg),mult:@(mult),fake_crit:$(fake_crit),amplifier:$(amplifier),cleandmg:@(cleandmg)}

with id uuid @s function tiger:legacy_combatant/dmgdisplay with storage tiger:legcombat @(id)